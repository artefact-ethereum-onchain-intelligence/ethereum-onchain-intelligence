version: 2

models:
  - name: uni_transactions_cleaned
    description: "Cleaned and validated transaction data originating from the uni_transactions source table. Invalid or incomplete records are filtered out."
    columns:
      # - name: unique_transaction_id
      #   description: "Unique identifier generated by concatenating table name, block number, and transaction index."
      #   tests:
      #     - unique
      #     - not_null
      # Add other non-critical columns with descriptions as needed
      # Example: - name: blockHash, description: ...
      - name: blockNumber
        description: "The block number where this transaction was recorded."
        tests:
          - not_null
      - name: timeStamp
        description: "Timestamp of the block containing the transaction."
        tests:
          - not_null
      - name: nonce
        description: "The number of transactions made by the sender prior to this one."
        tests:
          - not_null
      - name: transactionIndex
        description: "Integer of the transaction's index position in the block."
        tests:
          - not_null
      - name: "`from`"
        description: "Address of the sender."
        # tests: Temporarily removed due to suspected false negative in dbt 1.9.0
        #  - not_null
      - name: "`to`"
        description: "Address of the receiver. Null when it's a contract creation transaction."
        tests:
          - not_null # Filtered in clean_table macro
      - name: value
        description: "Value transferred in Wei (numeric)."
        tests:
          - not_null # Filtered in clean_table macro
      # Add other common columns with descriptions if they exist in your source
      # - name: gas
      # - name: gasPrice
      # - name: isError
      # - name: txreceipt_status
      # - name: input
      # - name: contractAddress
      # - name: cumulativeGasUsed
      # - name: gasUsed
      # - name: confirmations
      # - name: methodId
      # - name: functionName

  - name: uniswap_universal_router_transactions_cleaned
    description: "Cleaned and validated transaction data originating from the uniswap_universal_router_transactions source table. Invalid or incomplete records are filtered out."
    columns:
      # Replicate column definitions and tests from uni_transactions_cleaned
      # (or use anchors/aliases for less repetition if preferred)
      # - name: unique_transaction_id
      #   description: "Unique identifier generated by concatenating table name, block number, and transaction index."
      #   tests:
      #     - unique
      #     - not_null
      - name: blockNumber
        description: "The block number where this transaction was recorded."
        tests:
          - not_null
      - name: timeStamp
        description: "Timestamp of the block containing the transaction."
        tests:
          - not_null
      - name: nonce
        description: "The number of transactions made by the sender prior to this one."
        tests:
          - not_null
      - name: transactionIndex
        description: "Integer of the transaction's index position in the block."
        tests:
          - not_null
      - name: "`from`"
        description: "Address of the sender."
        tests:
          - not_null
      - name: "`to`"
        description: "Address of the receiver. Null when it's a contract creation transaction."
        tests:
          - not_null
      - name: value
        description: "Value transferred in Wei (numeric)."
        tests:
          - not_null
      # Add other relevant columns

  - name: uniswap_v2_router_transactions_cleaned
    description: "Cleaned and validated transaction data originating from the uniswap_v2_router_transactions source table. Invalid or incomplete records are filtered out."
    columns:
      # Replicate column definitions and tests from uni_transactions_cleaned
      # - name: unique_transaction_id
      #   description: "Unique identifier generated by concatenating table name, block number, and transaction index."
      #   tests:
      #     - unique
      #     - not_null
      - name: blockNumber
        description: "The block number where this transaction was recorded."
        tests:
          - not_null
      - name: timeStamp
        description: "Timestamp of the block containing the transaction."
        tests:
          - not_null
      - name: nonce
        description: "The number of transactions made by the sender prior to this one."
        tests:
          - not_null
      - name: transactionIndex
        description: "Integer of the transaction's index position in the block."
        tests:
          - not_null
      - name: "`from`"
        description: "Address of the sender."
        tests:
          - not_null
      - name: "`to`"
        description: "Address of the receiver. Null when it's a contract creation transaction."
        tests:
          - not_null
      - name: value
        description: "Value transferred in Wei (numeric)."
        tests:
          - not_null
      # Add other relevant columns
